{{- /* NOTE: This is overridden when using the responsive images module from DFDs collection */ -}}
{{- $curPage := . -}}
{{- $images := (slice) -}}
{{- with .Params.images -}}
    {{- range first 6 . -}}
        {{- $images = partial "helpers/lib/image-handling/findimagesrc" (dict "imageName" . "images" $images "page" $curPage "getRelative" false "ignoreBundleAssets" false) -}}
    {{- end -}}
{{- else -}}
    {{- $imageResources := $curPage.Resources.ByType "image" -}}
    {{- $featured := $imageResources.GetMatch "*feature*" -}}
    {{- if not $featured -}}
        {{- $featured = $imageResources.GetMatch "{*cover*,*thumbnail*}" -}}
    {{- end -}}
    {{- with $featured -}}
        {{- $images = $images | append .Permalink -}}
    {{- else -}}
        {{- with $curPage.Site.Params.images -}}
            {{- $images = partial "helpers/lib/image-handling/findimagesrc" (dict "imageName" (index . 0) "images" $images "page" $curPage "getRelative" false "ignoreBundleAssets" true) -}}
        {{- end -}}
    {{- end -}}
{{- end -}}
{{- return $images -}}